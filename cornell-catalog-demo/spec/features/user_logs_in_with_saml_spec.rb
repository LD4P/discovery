require 'spec_helper'

RSpec.feature "user logs in" do
  before do
  Rails.application.env_config["devise.mapping"] = Devise.mappings[:user] # If using Devise
  Rails.application.env_config["omniauth.auth"] = OmniAuth.config.mock_auth[:saml]
  end
  scenario "using netid via SAML" do
    stub_samlauth
    visit 'logins' 
    if ENV['SAML_IDP_TARGET_URL']
      expect(page).to have_link("Sign in with your netid")
      click_link "Sign in with your netid"
      expect(page).to have_content("Sign out")
    else
      expect(page).to_not have_link("Sign in with your netid")
    end
  end

  scenario "using netid from search history page" do
      stub_samlauth
      visit 'search_history' 
    if ENV['SAML_IDP_TARGET_URL'] && ENV['GOOGLE_CLIENT_ID']
      click_link "Sign in"
      expect(page).to have_link("Sign in with your netid")
      click_link "Sign in with your netid"
      expect(page).to have_content("Sign out")
      expect(page).to have_content("Search History")
    end
    if ENV['SAML_IDP_TARGET_URL'] && !ENV['GOOGLE_CLIENT_ID']
      click_link "Sign in"
      expect(page).to have_content("Sign out")
      expect(page).to have_content("Search History")
    end
  end

  def stub_samlauth
    # first, set OmniAuth to run in test mode
    OmniAuth.config.test_mode = true
    # then, provide a set of fake oauth data that
    # omniauth will use when a user tries to authenticate:
    OmniAuth.config.mock_auth[:saml] = OmniAuth::AuthHash.new({
      provider: "saml",
      "saml_resp" => saml_resp ,
      uid: "12345678910",
      extra: {raw_info: {} } ,
      info: {
        email: "ditester@example.com",
        name: ["Diligent Tester"],
        netid: "mjc12",
        groups: ["staff","student"],
        primary: ["staff"],
        first_name: "Diligent",
        last_name: "Tester"
      },
      credentials: {
        token: "abcdefg12345",
        refresh_token: "12345abcdefg",
        expires_at: DateTime.now
      }
    })
  end
  def saml_resp
params = {"SAMLResponse"=>"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHNhbWwycDpSZXNwb25zZSBEZXN0aW5hdGlvbj0iaHR0cDovL2VzMjg3LWRldi5saWJyYXJ5LmNvcm5lbGwuZWR1Ojg5ODgvdXNlcnMvYXV0aC9zYW1sL2NhbGxiYWNrIiBJRD0iXzAxYzdmODMyZTJhYzBkZGI2YmE3MmVmZGIwN2M1YjBlIiBJblJlc3BvbnNlVG89Il8wMTg4OTcxNi1hOWUwLTRiMTAtOGQ4NC03MzI3ZjMyYmI4MmMiIElzc3VlSW5zdGFudD0iMjAxOC0wNS0xNFQyMDoxNDoyMy40OTZaIiBWZXJzaW9uPSIyLjAiIHhtbG5zOnNhbWwycD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOnByb3RvY29sIj48c2FtbDI6SXNzdWVyIHhtbG5zOnNhbWwyPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIj5odHRwczovL3NoaWJpZHAtdGVzdC5jaXQuY29ybmVsbC5lZHUvaWRwL3NoaWJib2xldGg8L3NhbWwyOklzc3Vlcj48ZHM6U2lnbmF0dXJlIHhtbG5zOmRzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjIj4KPGRzOlNpZ25lZEluZm8+CjxkczpDYW5vbmljYWxpemF0aW9uTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8xMC94bWwtZXhjLWMxNG4jIi8+CjxkczpTaWduYXR1cmVNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNyc2Etc2hhMjU2Ii8+CjxkczpSZWZlcmVuY2UgVVJJPSIjXzAxYzdmODMyZTJhYzBkZGI2YmE3MmVmZGIwN2M1YjBlIj4KPGRzOlRyYW5zZm9ybXM+CjxkczpUcmFuc2Zvcm0gQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjZW52ZWxvcGVkLXNpZ25hdHVyZSIvPgo8ZHM6VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8xMC94bWwtZXhjLWMxNG4jIi8+CjwvZHM6VHJhbnNmb3Jtcz4KPGRzOkRpZ2VzdE1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jI3NoYTI1NiIvPgo8ZHM6RGlnZXN0VmFsdWU+NHRpK1NtdnB6bFpTSkRFemd1YThLR09iV3lVUmMxMTJiNEZ2djJSQjU2az08L2RzOkRpZ2VzdFZhbHVlPgo8L2RzOlJlZmVyZW5jZT4KPC9kczpTaWduZWRJbmZvPgo8ZHM6U2lnbmF0dXJlVmFsdWU+ClQ3RFJiemZXcThNeFhIUTdsV2JzbjFWZlhVRFVwS0dEVnJCN1Z2YU1qNUJwVU1BWHdkSXpBLzFMZ1VsVk15Q1Y0bGFrajhWazZSb2wKeUo3S3NUTlo4ZUppODYvdlI2M0FVZWlOc1hrUWkwbmhGNkVwN3FnSGZNemVXV0tJN25HKzlwUTJwT0pFcUxTK0hWTms2SjNQWmo4QwpIakhIbzJyMTVFTmVMMm1ZbC92a0svbzRhS29PMU5JSW90U2pXWlJtNVV6QlcvUzJGRGsrcSt1VFYzV3Fzdzd0NDZtbzBnZkI5ckl2ClZYN1BKa2t0bTcxOUJoK3YzWDZQQ0dWWDJ6alFPcWVBRmpsVHVNb0ZYTWF5VWQ5N1VQa2JNMTFGdEFYcmFoVlI1dUNXZEpBRE1EcHkKWWY3eVRtT1Q2ZFpSNStLRkQ0TDFiTkdMalNnYiszVkNSbmg4ZlE9PQo8L2RzOlNpZ25hdHVyZVZhbHVlPgo8ZHM6S2V5SW5mbz48ZHM6WDUwOURhdGE+PGRzOlg1MDlDZXJ0aWZpY2F0ZT5NSUlEWERDQ0FrU2dBd0lCQWdJVkFNS0NSOElHWElPek8veUx0NmU0c2Q3T01MZ0VNQTBHQ1NxR1NJYjNEUUVCQlFVQU1DY3hKVEFqCkJnTlZCQU1USEhOb2FXSnBaSEF0ZEdWemRDNWphWFF1WTI5eWJtVnNiQzVsWkhVd0hoY05NVEl3TmpBM01UZzBOakl5V2hjTk16SXcKTmpBM01UZzBOakl5V2pBbk1TVXdJd1lEVlFRREV4eHphR2xpYVdSd0xYUmxjM1F1WTJsMExtTnZjbTVsYkd3dVpXUjFNSUlCSWpBTgpCZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUFraGxmOUVQMzk5bXFuQnRHbVBHOVZxdTc5QWYyTlpoaHNUK0xUTUExCnVoUFpZdjRSWC9FNFZEK0lxY2UvRVVQMW5kUGtHRXdCbmhyUlQyWmVnRHBDbWdvK0VjRUQ4Y0FoOUFid0ZUVGl0bUJqeHZFcnRKblMKMFpCZk1DTERjZ09WMXpNNmJUNWZGOVNBSW0wWlZTYWV5UWJORHdWRGR3c0JRSGpBZGc1dkxkNVZlWUg5TUk2ZW56ZGdCdFBOU3JFdAozcVp0Q1dsN2V2OFlRbFdGM3ZaK0VveURyV1BaU09XemdSMzFRQnM3bXoxM0FCU3ZlSXJpNjhGZ050aDl5bGdGUzdWTlVsQXA2eHg2CkJSbk1nTDFRelZNWjVGNFBiU1JEcDNVQm9TNlBNSGQrV0ZlbkpXUFBoNlNoTXlySW5ySjRRQVBmS0M3N3RKVytHVVhsNFQ0RHFRSUQKQVFBQm8zOHdmVEJjQmdOVkhSRUVWVEJUZ2h4emFHbGlhV1J3TFhSbGMzUXVZMmwwTG1OdmNtNWxiR3d1WldSMWhqTm9kSFJ3Y3pvdgpMM05vYVdKcFpIQXRkR1Z6ZEM1amFYUXVZMjl5Ym1Wc2JDNWxaSFV2YVdSd0wzTm9hV0ppYjJ4bGRHZ3dIUVlEVlIwT0JCWUVGRjlSCkFEbm1Cc081MGhEOFQrTVVGcUlnV0FPeE1BMEdDU3FHU0liM0RRRUJCUVVBQTRJQkFRQnFZcGZkSzRYQVlFNTZzWW1xL3ZVS09TQmMKYk8yVXkzUjdvVEdyREt4clpJN3hDMWpjaGFhVFc2Qlh0ZzZ3elRTbjhKbzJNMGd2UXJXeXhaZ1FEclhHYUwyVGFQZjVXak9XdC9Tcwp1SitJU2hvZlM2WldMa1BDbnJSMEFnOVB3VTU4c3p3MmpqVUU0ZUp5di9kTER6aERISjBFR2FzdGdTelJoMXIzdjJ3OEJZejFSSHZqCndFU1BCMkhUZ1YxaXVId2FJamFKeE4zOVh5UzZaUXpCajZzWjZMZW0xUjM5elhtRXZ0VmZDazlxZ1NLbmJZdWxycmtJQnp4bGxCMzQKVFVUS0ZzK056MWovc2cyZ2o2UTV1OXVXNm1TbTY2bXFuMkU1M3IyQ05IUFR6V0d3b201TWk5Wi9EdE9iMkwvNWpqeGhGdkNLeG5FYgpJV203WEllOHF0cW88L2RzOlg1MDlDZXJ0aWZpY2F0ZT48L2RzOlg1MDlEYXRhPjwvZHM6S2V5SW5mbz48L2RzOlNpZ25hdHVyZT48c2FtbDJwOlN0YXR1cz48c2FtbDJwOlN0YXR1c0NvZGUgVmFsdWU9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpzdGF0dXM6U3VjY2VzcyIvPjwvc2FtbDJwOlN0YXR1cz48c2FtbDI6QXNzZXJ0aW9uIElEPSJfYTdlOGY5Njk1N2I4ODFmZDNmYjBjNWJlZDY5ZjkxODQiIElzc3VlSW5zdGFudD0iMjAxOC0wNS0xNFQyMDoxNDoyMy40OTZaIiBWZXJzaW9uPSIyLjAiIHhtbG5zOnNhbWwyPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIj48c2FtbDI6SXNzdWVyPmh0dHBzOi8vc2hpYmlkcC10ZXN0LmNpdC5jb3JuZWxsLmVkdS9pZHAvc2hpYmJvbGV0aDwvc2FtbDI6SXNzdWVyPjxzYW1sMjpTdWJqZWN0PjxzYW1sMjpOYW1lSUQgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDp0cmFuc2llbnQiIE5hbWVRdWFsaWZpZXI9Imh0dHBzOi8vc2hpYmlkcC10ZXN0LmNpdC5jb3JuZWxsLmVkdS9pZHAvc2hpYmJvbGV0aCIgU1BOYW1lUXVhbGlmaWVyPSJodHRwOi8vZXMyODctZGV2LmxpYnJhcnkuY29ybmVsbC5lZHU6ODk4OC91c2Vycy9hdXRoL3NhbWwvbWV0YWRhdGEiPkFBcHpaV055WlhReU9UUTFvNllqYWlRbkhYZTMxaVNlZ2dZYm9xaHJDdCtxQWE1Q2dxWkdBcnpaUCtUc21YUW1yVkRnQ01OMjduZXFLaTlUdHZERHE1M1ZVNFJEVXRLNEd1SnFyaEI5YnZyaTRaL3MrM1dwWnFEYjhnVlJveG05NWFNL3FaLzdQclpuWDhlNE5TL1AvR0c1eEVmNGk4V0Q0RE41TzJ0MXhFa1FzOVdiS3Q2d0cvaUs0RTJWWlM4PTwvc2FtbDI6TmFtZUlEPjxzYW1sMjpTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmNtOmJlYXJlciI+PHNhbWwyOlN1YmplY3RDb25maXJtYXRpb25EYXRhIEFkZHJlc3M9IjEwLjk0LjMuMTkiIEluUmVzcG9uc2VUbz0iXzAxODg5NzE2LWE5ZTAtNGIxMC04ZDg0LTczMjdmMzJiYjgyYyIgTm90T25PckFmdGVyPSIyMDE4LTA1LTE0VDIwOjE5OjIzLjUyN1oiIFJlY2lwaWVudD0iaHR0cDovL2VzMjg3LWRldi5saWJyYXJ5LmNvcm5lbGwuZWR1Ojg5ODgvdXNlcnMvYXV0aC9zYW1sL2NhbGxiYWNrIi8+PC9zYW1sMjpTdWJqZWN0Q29uZmlybWF0aW9uPjwvc2FtbDI6U3ViamVjdD48c2FtbDI6Q29uZGl0aW9ucyBOb3RCZWZvcmU9IjIwMTgtMDUtMTRUMjA6MTQ6MjMuNDk2WiIgTm90T25PckFmdGVyPSIyMDE4LTA1LTE0VDIwOjE5OjIzLjQ5NloiPjxzYW1sMjpBdWRpZW5jZVJlc3RyaWN0aW9uPjxzYW1sMjpBdWRpZW5jZT5odHRwOi8vZXMyODctZGV2LmxpYnJhcnkuY29ybmVsbC5lZHU6ODk4OC91c2Vycy9hdXRoL3NhbWwvbWV0YWRhdGE8L3NhbWwyOkF1ZGllbmNlPjwvc2FtbDI6QXVkaWVuY2VSZXN0cmljdGlvbj48L3NhbWwyOkNvbmRpdGlvbnM+PHNhbWwyOkF1dGhuU3RhdGVtZW50IEF1dGhuSW5zdGFudD0iMjAxOC0wNS0xNFQyMDoxNDoyMi4zNzdaIiBTZXNzaW9uSW5kZXg9Il8xMDUzYmFmMmI3OTA3Y2E2MTg0NDZiMTZkYzhjMjMzZSI+PHNhbWwyOlN1YmplY3RMb2NhbGl0eSBBZGRyZXNzPSIxMC45NC4zLjE5Ii8+PHNhbWwyOkF1dGhuQ29udGV4dD48c2FtbDI6QXV0aG5Db250ZXh0Q2xhc3NSZWY+dXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFjOmNsYXNzZXM6UGFzc3dvcmRQcm90ZWN0ZWRUcmFuc3BvcnQ8L3NhbWwyOkF1dGhuQ29udGV4dENsYXNzUmVmPjwvc2FtbDI6QXV0aG5Db250ZXh0Pjwvc2FtbDI6QXV0aG5TdGF0ZW1lbnQ+PHNhbWwyOkF0dHJpYnV0ZVN0YXRlbWVudD48c2FtbDI6QXR0cmlidXRlIEZyaWVuZGx5TmFtZT0iZWR1UGVyc29uRW50aXRsZW1lbnQiIE5hbWU9InVybjpvaWQ6MS4zLjYuMS40LjEuNTkyMy4xLjEuMS43IiBOYW1lRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXR0cm5hbWUtZm9ybWF0OnVyaSI+PHNhbWwyOkF0dHJpYnV0ZVZhbHVlPnVybjptYWNlOmRpcjplbnRpdGxlbWVudDpjb21tb24tbGliLXRlcm1zPC9zYW1sMjpBdHRyaWJ1dGVWYWx1ZT48c2FtbDI6QXR0cmlidXRlVmFsdWU+dXJuOm1hY2U6Y29ybmVsbC5lZHU6em9vbTp1c2VyPC9zYW1sMjpBdHRyaWJ1dGVWYWx1ZT48c2FtbDI6QXR0cmlidXRlVmFsdWU+dXJuOm1hY2U6b2NsYy5vcmc6MTAwLTE1NS04MDM8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjxzYW1sMjpBdHRyaWJ1dGVWYWx1ZT51cm46bWFjZTpjb3JuZWxsLmVkdTpseW5kYTp1c2VyPC9zYW1sMjpBdHRyaWJ1dGVWYWx1ZT48c2FtbDI6QXR0cmlidXRlVmFsdWU+dXJuOm1hY2U6aW5jb21tb246ZW50aXRsZW1lbnQ6Y29tbW9uOjE8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjxzYW1sMjpBdHRyaWJ1dGVWYWx1ZT51cm46bWFjZTpjb3JuZWxsLmVkdTpsYWJhcmNoaXZlczp1c2VyPC9zYW1sMjpBdHRyaWJ1dGVWYWx1ZT48L3NhbWwyOkF0dHJpYnV0ZT48c2FtbDI6QXR0cmlidXRlIEZyaWVuZGx5TmFtZT0iY24iIE5hbWU9InVybjpvaWQ6Mi41LjQuMyIgTmFtZUZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmF0dHJuYW1lLWZvcm1hdDp1cmkiPjxzYW1sMjpBdHRyaWJ1dGVWYWx1ZT5FbnJpY28gU2lsdGVycmE8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjwvc2FtbDI6QXR0cmlidXRlPjxzYW1sMjpBdHRyaWJ1dGUgRnJpZW5kbHlOYW1lPSJtYWlsIiBOYW1lPSJ1cm46b2lkOjAuOS4yMzQyLjE5MjAwMzAwLjEwMC4xLjMiIE5hbWVGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphdHRybmFtZS1mb3JtYXQ6dXJpIj48c2FtbDI6QXR0cmlidXRlVmFsdWU+ZXMyODdAY29ybmVsbC5lZHU8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjwvc2FtbDI6QXR0cmlidXRlPjxzYW1sMjpBdHRyaWJ1dGUgRnJpZW5kbHlOYW1lPSJlZHVQZXJzb25BZmZpbGlhdGlvbiIgTmFtZT0idXJuOm9pZDoxLjMuNi4xLjQuMS41OTIzLjEuMS4xLjEiIE5hbWVGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphdHRybmFtZS1mb3JtYXQ6dXJpIj48c2FtbDI6QXR0cmlidXRlVmFsdWU+bWVtYmVyPC9zYW1sMjpBdHRyaWJ1dGVWYWx1ZT48c2FtbDI6QXR0cmlidXRlVmFsdWU+c3RhZmY8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjxzYW1sMjpBdHRyaWJ1dGVWYWx1ZT5lbXBsb3llZTwvc2FtbDI6QXR0cmlidXRlVmFsdWU+PHNhbWwyOkF0dHJpYnV0ZVZhbHVlPmFsdW08L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjwvc2FtbDI6QXR0cmlidXRlPjxzYW1sMjpBdHRyaWJ1dGUgRnJpZW5kbHlOYW1lPSJkaXNwbGF5TmFtZSIgTmFtZT0idXJuOm9pZDoyLjE2Ljg0MC4xLjExMzczMC4zLjEuMjQxIiBOYW1lRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXR0cm5hbWUtZm9ybWF0OnVyaSI+PHNhbWwyOkF0dHJpYnV0ZVZhbHVlPkVucmljbyBTaWx0ZXJyYTwvc2FtbDI6QXR0cmlidXRlVmFsdWU+PC9zYW1sMjpBdHRyaWJ1dGU+PHNhbWwyOkF0dHJpYnV0ZSBGcmllbmRseU5hbWU9ImdpdmVuTmFtZSIgTmFtZT0idXJuOm9pZDoyLjUuNC40MiIgTmFtZUZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmF0dHJuYW1lLWZvcm1hdDp1cmkiPjxzYW1sMjpBdHRyaWJ1dGVWYWx1ZT5FbnJpY288L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjwvc2FtbDI6QXR0cmlidXRlPjxzYW1sMjpBdHRyaWJ1dGUgRnJpZW5kbHlOYW1lPSJlZHVQZXJzb25PcmdETiIgTmFtZT0idXJuOm9pZDoxLjMuNi4xLjQuMS41OTIzLjEuMS4xLjMiIE5hbWVGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphdHRybmFtZS1mb3JtYXQ6dXJpIj48c2FtbDI6QXR0cmlidXRlVmFsdWU+bz1Db3JuZWxsIFVuaXZlcnNpdHksIGM9VVM8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjwvc2FtbDI6QXR0cmlidXRlPjxzYW1sMjpBdHRyaWJ1dGUgRnJpZW5kbHlOYW1lPSJ1aWQiIE5hbWU9InVybjpvaWQ6MC45LjIzNDIuMTkyMDAzMDAuMTAwLjEuMSIgTmFtZUZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmF0dHJuYW1lLWZvcm1hdDp1cmkiPjxzYW1sMjpBdHRyaWJ1dGVWYWx1ZT5lczI4Nzwvc2FtbDI6QXR0cmlidXRlVmFsdWU+PC9zYW1sMjpBdHRyaWJ1dGU+PHNhbWwyOkF0dHJpYnV0ZSBGcmllbmRseU5hbWU9ImVkdVBlcnNvblNjb3BlZEFmZmlsaWF0aW9uIiBOYW1lPSJ1cm46b2lkOjEuMy42LjEuNC4xLjU5MjMuMS4xLjEuOSIgTmFtZUZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmF0dHJuYW1lLWZvcm1hdDp1cmkiPjxzYW1sMjpBdHRyaWJ1dGVWYWx1ZT5tZW1iZXJAY29ybmVsbC5lZHU8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjxzYW1sMjpBdHRyaWJ1dGVWYWx1ZT5zdGFmZkBjb3JuZWxsLmVkdTwvc2FtbDI6QXR0cmlidXRlVmFsdWU+PHNhbWwyOkF0dHJpYnV0ZVZhbHVlPmFsdW1AY29ybmVsbC5lZHU8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjxzYW1sMjpBdHRyaWJ1dGVWYWx1ZT5lbXBsb3llZUBjb3JuZWxsLmVkdTwvc2FtbDI6QXR0cmlidXRlVmFsdWU+PC9zYW1sMjpBdHRyaWJ1dGU+PHNhbWwyOkF0dHJpYnV0ZSBGcmllbmRseU5hbWU9ImVkdXBlcnNvbnByaW1hcnlhZmZpbGlhdGlvbiIgTmFtZT0idXJuOm9pZDoxLjMuNi4xLjQuMS41OTIzLjEuMS4xLjUiIE5hbWVGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphdHRybmFtZS1mb3JtYXQ6dXJpIj48c2FtbDI6QXR0cmlidXRlVmFsdWU+c3RhZmY8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjwvc2FtbDI6QXR0cmlidXRlPjxzYW1sMjpBdHRyaWJ1dGUgRnJpZW5kbHlOYW1lPSJzbiIgTmFtZT0idXJuOm9pZDoyLjUuNC40IiBOYW1lRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXR0cm5hbWUtZm9ybWF0OnVyaSI+PHNhbWwyOkF0dHJpYnV0ZVZhbHVlPlNpbHRlcnJhPC9zYW1sMjpBdHRyaWJ1dGVWYWx1ZT48L3NhbWwyOkF0dHJpYnV0ZT48c2FtbDI6QXR0cmlidXRlIEZyaWVuZGx5TmFtZT0iZWR1UGVyc29uUHJpbmNpcGFsTmFtZSIgTmFtZT0idXJuOm9pZDoxLjMuNi4xLjQuMS41OTIzLjEuMS4xLjYiIE5hbWVGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphdHRybmFtZS1mb3JtYXQ6dXJpIj48c2FtbDI6QXR0cmlidXRlVmFsdWU+ZXMyODdAY29ybmVsbC5lZHU8L3NhbWwyOkF0dHJpYnV0ZVZhbHVlPjwvc2FtbDI6QXR0cmlidXRlPjwvc2FtbDI6QXR0cmlidXRlU3RhdGVtZW50Pjwvc2FtbDI6QXNzZXJ0aW9uPjwvc2FtbDJwOlJlc3BvbnNlPg=="}
  end
end
