I"×	(function() {
  var bookcovers;

  bookcovers = {
    onLoad: function() {
      this.initObjects();
      return this.fetchCoversOclc();
    },
    initObjects: function() {
      return this.results = $('.bookcover');
    },
    fetchCoversOclc: function() {
      var resultsOclc, url;
      resultsOclc = [];
      this.results.each(function() {
        var oclc;
        oclc = 'OCLC:' + $(this).data('oclc');
        if (oclc) {
          return resultsOclc.push(oclc);
        }
      });
      url = "https://books.google.com/books?bibkeys=" + resultsOclc + "&jscmd=viewapi&callback=?";
      return $.getJSON(url, {}, this.insertCoversOclc);
    },
    insertCoversOclc: function(data) {
      var divId, id, results, thumbnail, values;
      results = [];
      for (id in data) {
        values = data[id];
        divId = values.bib_key.replace(':', '\\:');
        thumbnail = values.thumbnail_url;
        if (thumbnail) {
          thumbnail = values.thumbnail_url.replace('zoom=5', 'zoom=1');
          results.push($("#" + divId).replaceWith(function() {
            return '<img class="bookcover img-thumbnail" alt="" src="' + thumbnail + '">';
          }));
        } else {
          results.push($("#" + divId).replaceWith(function() {
            return '';
          }));
        }
      }
      return results;
    },
    fetchCovers: function() {
      var resultsIsbn, url;
      resultsIsbn = [];
      this.results.each(function() {
        var isbn;
        isbn = $(this).data('isbn');
        if (isbn) {
          return resultsIsbn.push(isbn);
        }
      });
      url = "https://books.google.com/books?bibkeys=" + resultsIsbn + "&jscmd=viewapi&callback=?";
      return $.getJSON(url, {}, this.insertCovers);
    },
    insertCovers: function(data) {
      var divId, id, results, thumbnail, values;
      results = [];
      for (id in data) {
        values = data[id];
        divId = 'isbn_' + values.bib_key;
        thumbnail = values.thumbnail_url;
        if (thumbnail) {
          thumbnail = values.thumbnail_url.replace('zoom=5', 'zoom=1');
          results.push($("#" + divId).replaceWith(function() {
            return '<img class="bookcover img-thumbnail" alt="" src="' + thumbnail + '">';
          }));
        } else {
          results.push($("#" + divId).replaceWith(function() {
            return '';
          }));
        }
      }
      return results;
    }
  };

  $(document).ready(function() {
    return bookcovers.onLoad();
  });

}).call(this);
:ET